--XMLTYPE  sys.XMLTYPE;
declare
CML VARCHAR(1000);
XMLType SYS.XMLTYPE;
begin
CML:='<ACCESSES>
        <ACCESS>
          <SYPROJECTIDV10>1</SYPROJECTIDV10>
          <SYUSERIDV10>JAY</SYUSERIDV10>
          <SYCREATEDBYV10>SYSTEM</SYCREATEDBYV10>
          <SYCREATEDOND>SYSDATE</SYCREATEDOND>
          <SYAUTHORIZEDYNV2>Y</SYAUTHORIZEDYNV2>                
        </ACCESS>
    </ACCESSES>';
XMLType:=sys.xmltype.createXML(CML);
    DECLARE CURSOR C1 IS           
    SELECT ExtractValue(Value(p),'/ACCESS/SYPROJECTIDV10/text()') as PROJECTID,
    ExtractValue(Value(p),'/ACCESS/SYUSERIDV10/text()') as  USERID,
    ExtractValue(Value(p),'/ACCESS/SYCREATEDBYV10/text()') as  CREATEDBY,
    --ExtractValue(Value(p),'/ACCESS/SYCREATEDOND/text()') as  CREATEDON,
    ExtractValue(Value(p),'/ACCESS/SYAUTHORIZEDYNV2/text()') as  AUTHORIZED
    FROM   TABLE(XMLSequence(Extract(XMLTYPE,'/ACCESSES/ACCESS'))) P;
BEGIN
    FOR I IN C1 LOOP
      INSERT INTO SYPROJECTACCESS_M(SYPROJECTIDV10,SYUSERIDV10,SYCREATEDBYV10,SYAUTHORIZEDYNV2) 
      VALUES(I.PROJECTID,I.USERID,I.CREATEDBY,I.AUTHORIZED);
    END LOOP;
END;
END;
